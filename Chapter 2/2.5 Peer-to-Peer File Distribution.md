### 1. Overview of P2P architecture
* The previous applications have thus far all employed client-server architectures with significant reliance on always-on infrastructure servers.
* With a P2P architecture, there is minimal (or no) reliance on always-on infrastructure servers.
* Instead, pairs of intermittently connected hosts, called peers, communicate directly with each other.
* The peers are not owned by a service provider, but are instead PCs, laptops, and smartpones controlled by users.
* In P2P file distribution, each peer can redistribute any portion of the file it has received to any other peers, thereby assisting the server in the distribution process.
* The most popular P2P file distribution protocol is BitTorrent.

***

### 2. Scalability of P2P Architectures

* Suppose a server and N peers are connected to the Internet.
* Denote the following:
	* Upload rate of the server’s access link by u<sub>s</sub>
 	* Upload rate of the i<sup>th</sup> peer’s access link by u<sub>i</sub>
  	* Download rate of the i<sup>th</sup> peer’s access link by d<sub>i<sub>.
  	* The size of the file to be distributed (in bits) by F.
* The distribution time (D) is the time it takes to get a copy of the file to all N peers.
* Assume that the Internet core has abundant bandwidth, implying that all of the bottlenecks are in access networks.

###### Distribution time for the client-server architecture
* The server must transmit one copy of the file to each of the N peers. Thus, the server must transmit NF bits. Since the server’s upload rate is u<sub>s</sub>, the time to distribute the file must be at least NF/u<sub>s</sub>.
* Let d<sub>min</sub> denote the download rate of the peer with the lowest download rate. The peer with the lowest download rate cannot obtain all F bits of the file in less than F/d<sub>min</sub> seconds.
* Putting these two together, D<sub>client-server</sub> = max{NF/u<sub>s</sub>, F/d<sub>min</sub>}
* For large enough N, the D<sub>client-server</sub> = NF/u<sub>s</sub>.
* Thus, the distribution time increases linearly with the number of peers N.

###### Distribution time for the P2P architecture
* In a P2P architecture, each peer can assist the server in distributing the file, this is when a peer receives some file data, it can use its own upload capacity to redistribute the data to other peers
* At the beginning of the distribution, only the server has the file. To get this file into the community of peers, the server must send each bit of the file at least once into its access link. Thus, the minimum distribution time is at least F/u<sub>s</sub>. Note that unlike the client-server scheme, a bit sent once by the server may not have to be sent by the server again, as the peers may redistribute the bit among themselves.
* As with the client-server architecture, the peer with the lowest download rate cannot obtain all F bits of the file in less than F/d<sub>min</sub> seconds. Thus, the minimum distribution time is at least F/d<sub>min</sub>.
* Finally, the total upload capacity of the system as a whole is equal to the upload rate of the server plus the upload rates of each of the individual peers, that is, u<sub>total</sub> = u<sub>s</sub> + u<sub>1</sub> + ... + u<sub>n</sub>. Thus, the minimum distribution time is also at least NF/(u<sub>s</sub> + u<sub>1</sub> + ... + u<sub>n</sub>).
* Together, D<sub>P2P</sub> = max{F/u<sub>s</sub>, F/d<sub>min</sub>, NF/(u<sub>s</sub> + u<sub>1</sub> + ... + u<sub>n</sub>)}
* In this case, the distribution time is not linear, as every time a new peer is added, its upload capacity is also plays a role in reducing the overall load.

###### Comparing D<sub>client-server</sub> and D<sub>P2P</sub>
* Setting F/u as 1 hour (so each peer takes 1 hour to transfer the file), u<sub>s</sub> as 10u (so server upload is 10x peer upload) and d<sub>min</sub> >= u<sub>s</sub>, we get the graph in the snapshot below.
* For the client-server architecture, the distribution time increases linearly and without bound as the number of peers increases.
* However, for the P2P architecture, the minimal distribution time is not only always less than the distribution time of the client-server architecture; it is also less than one hour for any number of peers N.
* Thus, applications with the P2P architecture can be self-scaling, and this scalability is a direct consequence of peers being redistributors as
well as consumers of bits.

<img width="800" alt="image" src="https://github.com/user-attachments/assets/9987b5ab-a70a-4bdc-b9a8-4b19b3d121a0" />
	
***

### 3. BitTorrent

