### 1. Overview of Delay in Packet-Switched networks

#### 1.1 Types of Delay

* As a packet from one host to another via a series of routers, it suffers certian delays at every node (nodal delay):
	* Processing delay 
 	* Queuing delay
  	* Transmission delay
  	* Propogation delay

<img width="800" alt="image" src="https://github.com/user-attachments/assets/5ff3ca66-6487-47b1-ad24-93cc2fe71591" />

###### Processing delay
* Time required to examine the packet’s header and determine where to direct the packet.
* Also includes time needed to check for bit-level errors in the packet that occurred in transmitting the packet’s bits from the upstream node.
* Processing delays in high-speed routers are typically on the order of microseconds or less.

###### Queuing delay
* After this processing, the router directs the packet to the queue that precedes the link to next node, where the packet experiences queuing delay.
* The length of the queuing delay of a specific packet will depend on the number of earlier-arriving packets that are queued and waiting for transmission onto
the link, ranging from zero wait time if the queue is empty to longer wait times if the traffic is heavy.
* Queuing delays can be on the order of microseconds to milliseconds in practice.

###### Transmission delay
* The amount of time required to push (that is, transmit) all of the packet’s bits into the link is the transmission delay.
* As seen [earlier](https://github.com/violet-autumn/Computer-Networking/blob/main/Chapter%201/1.3%20The%20Network%20Core.md#store-and-forward-packet-switching), if we denote the length of the packet by L bits, and the transmission rate of the outbound link as R bits/sec, then the transmission delay is d<sub>trans</sub>=L/R.
* Transmission delays are typically on the order of microseconds to milliseconds in practice.

###### Propogation delay
* The time required to propagate from the beginning of the outbound link to next node is the propagation delay.
* The bit propagates at the propagation speed of the link, which depends on the physical medium of the link, and is in the range of 2x10<sup>^8</sup> meters/sec to 3x10<sup>^8</sup> meters/sec.
* The propagation delay can be represented by d/s, where d is the distance between two nodes and s is the propogation speed.
* In wide-area networks, propagation delays are on the order of milliseconds.

#### 1.2 Comparing Transmission and Propagation Delay

* The total nodal delay is given by d<sub>nodal</sub> = d<sub>proc</sub> + d<sub>queue</sub> + d<sub>trans</sub> + d<sub>prop</sub>
* The contribution of these delay components can vary significantly.
	* d<sub>prop</sub> can be negligible for a link connecting two routers on the same university campus; however, it could be hundreds of milliseconds for two routers interconnected by a geostationary satellite link, and become the dominant term in d<sub>nodal</sub>.
 	* Similarly, d<sub>trans</sub> can range from negligible to significant. Its contribution is typically negligible for transmission rates of 10 Mbps and higher (for
example, for LANs); however, it can be hundreds of milliseconds for large Internet packets sent over low-speed dial-up modem links.
	* The processing delay, d<sub>proc</sub>, is often negligible; however, it strongly influences a router’s maximum throughput - the maximum rate at which a router can forward packets.
* If transmission delay is high and propogation delay is low, it can happen that the first bits of packet reach the next node before the last bits of the packet are even transmitted.

***

### 2. Queuing Delay and Packet Loss

* Unlike the other three delays, the queuing delay can vary from packet to packet.
	* Eg: If 10 packets arrive at an empty queue at the same time, the first packet transmitted will suffer no queuing delay, while the last packet transmitted will suffer a relatively large queuing delay.
* Therefore, we use statistical measures (like average queuing delay, probablity that the delay will exceed a given value) when characterizing queuing delay.
* Queuing delay depends upon:
	* Rate at which traffic arrives at the queue (let a packets/second be the average rate at which packets arrive)
 	* Transmission rate of the link (let R bits/second be the outbound transmission rate)
  	* Nature of the arriving traffic (periodic or in spurts)

###### Traffic Intensity
* Let L bits be the size of the packets, then the bits arrive at the queue at the rate of La bits/second.
* Traffic Intensity is defined as $\frac{La}{R}$, and it plays a crucial role in designing systems to minimise queuing delay.
	* If $\frac{La}{R}$ > 1, the average rate at which bits arrive at the queue exceeds the rate at which the bits can be transmitted from the queue - leading to increase in queue size and queuing delay (and eventually causing packet loss).
 	* If $\frac{La}{R}$ ≤ 1, the nature of arriving traffic plays a role:
  		* If packets arrive periodically—that is, say one packet arrives every L/R seconds—then every packet will arrive at an empty queue and there will be no queuing delay.
    	* If packets arrive in bursts (of say P packets every $\frac{PL}{R}$ seconds), then the first packet will face no queuing delay, while the last one will be delayed by $\frac{(P-1)L}{R}$ seconds.
* Typically, the arrival process to a queue is random. In this more realistic case, the quantity $\frac{La}{R}$ is not usually sufficient to fully characterize the queuing delay statistics.
* Nonetheless, it is useful in gaining an intuitive understanding of the extent of the queuing delay.
	* If traffic intensity is close to zero, then packet arrivals are few and far between and it is unlikely that an arriving packet will find another packet in the queue, and hence the queuing delay will be close to zero.
 	* If traffic intensity is close to one:
  		* There will be intervals of time when the arrival rate exceeds the transmission capacity (due to variations in packet arrival rate), and a queue will form during these periods of time.
    	* When the arrival rate is less than the transmission capacity, the length of the queue will shrink.
     	* As the traffic intensity approaches one, the average queue length gets larger and larger, and the average queuing delay increases rapidly. A small percentage increase in the intensity will result in a much larger percentage-wise increase in delay.

###### Packet Loss
* As the queue preceding a link has finite capacity, packet delays do not really keep increasing and approach infinity as the traffic intensity approaches 1.
* Instead, a packet can arrive to find a full queue, and with no place to store such a packet, a router will drop that packet.
* From an end-system viewpoint, a packet loss will look like a packet having been transmitted into the network core but never emerging from the network at the destination. The lost packet may be retransmitted again on an end-to-end basis in order to ensure that all data are eventually transferred from source to destination.
* The fraction of lost packets increases as the traffic intensity increases.
* Therefore, performance at a node is often measured not only in terms of delay, but also in terms of the probability of packet loss.

***

### 3. End-to-End Delay
